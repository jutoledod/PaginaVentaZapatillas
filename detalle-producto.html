<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SneakerStore - Detalle Producto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navegaci贸n -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-running"></i> SneakerStore
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="index.html">Inicio</a>
                <a class="nav-link" href="productos.html">Zapatillas</a>
                <a class="nav-link carrito-btn" href="carrito.html">
                    <i class="fas fa-shopping-cart"></i> (<span id="contador">0</span>)
                </a>
            </div>
        </div>
    </nav>

    <!-- Detalle del Producto -->
    <div class="container py-5">
        <div id="producto-detalle">
            <!-- Se carga con JavaScript -->
        </div>
        
        <div class="text-center mt-4">
            <a href="productos.html" class="btn btn-outline-dark">
                <i class="fas fa-arrow-left"></i> Volver a Productos
            </a>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/productos.js"></script>
    <script src="js/carrito.js"></script>
    <script>
        // Cargar detalle del producto
        function cargarDetalleProducto() {
            const urlParams = new URLSearchParams(window.location.search);
            const productoId = parseInt(urlParams.get('id')) || 1;
            
            const producto = productos.find(p => p.id === productoId);
            const contenedor = document.getElementById('producto-detalle');
            
            if (producto) {
                const stockClass = producto.stock <= producto.stockCritico ? 'bg-danger' : 'bg-success';
                const stockTexto = producto.stock <= producto.stockCritico ? 'Stock Cr铆tico' : 'Disponible';
                
                contenedor.innerHTML = `
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="productos.html" style="color: #111;">Productos</a>
                            </li>
                            <li class="breadcrumb-item active">${producto.nombre}</li>
                        </ol>
                    </nav>
                    
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="zapatilla-imagen mb-4" style="height: 400px; font-size: 8rem; background: #f5f5f5;">
                                
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <h1 style="font-weight: 700;">${producto.nombre}</h1>
                                <span class="badge ${getMarcaColor(producto.marca)} marca-badge fs-6">${producto.marca.toUpperCase()}</span>
                            </div>
                            
                            <div class="precio-nike mb-3" style="font-size: 2rem;">${formatearPrecio(producto.precio)}</div>
                            
                            <div class="mb-3">
                                <span class="badge ${stockClass} fs-6">${stockTexto} (${producto.stock} unidades)</span>
                            </div>
                            
                            <div class="mb-4">
                                <h5>Descripci贸n</h5>
                                <p class="text-muted">${producto.descripcion}</p>
                            </div>
                            
                            <div class="mb-4">
                                <h5>Detalles</h5>
                                <ul class="text-muted">
                                    <li><strong>C贸digo:</strong> ${producto.codigo}</li>
                                    <li><strong>Categor铆a:</strong> ${producto.categoria}</li>
                                    <li><strong>Marca:</strong> ${producto.marca}</li>
                                </ul>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">Talla</label>
                                <select class="form-select" id="talla-seleccionada" style="max-width: 200px;">
                                    <option value="38">38</option>
                                    <option value="39">39</option>
                                    <option value="40" selected>40</option>
                                    <option value="41">41</option>
                                    <option value="42">42</option>
                                    <option value="43">43</option>
                                </select>
                            </div>
                            
                            <div class="d-grid gap-2">
                                <button class="btn-nike btn-lg" id="btn-agregar" ${producto.stock <= 0 ? 'disabled' : ''}>
                                    <i class="fas fa-cart-plus"></i> Agregar al Carrito
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                // Conectar bot贸n al carrito **con talla**
                const btn = document.getElementById('btn-agregar');
                btn.addEventListener('click', function() {
                    const talla = document.getElementById('talla-seleccionada').value;
                    agregarAlCarrito(producto.id, talla);
                });
            } else {
                contenedor.innerHTML = `
                    <div class="alert alert-warning text-center">
                        <h4>Producto no encontrado</h4>
                        <p>El producto que buscas no existe.</p>
                    </div>
                `;
            }
        }
        
        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            cargarCarrito();
            cargarDetalleProducto();
        });
    </script>



    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
            <div class="col-md-6">
                <h5><i class="fas fa-running"></i> SneakerStore</h5>
                <p>Tu tienda de zapatillas de confianza</p>
            </div>
            <div class="col-md-6 text-end">
                <p>漏 2024 SneakerStore - Todos los derechos reservados</p>
            </div>
            </div>
        </div>
    </footer>

</body>

</html>
